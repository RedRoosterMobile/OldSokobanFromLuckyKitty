(function(){function b(a,b,c,d){var e=this,f;e.dir=a;e.fade=c;e.shrink=d;e.uid=++m;e.bar=document.createElement("div");f="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:rgba(0,0,0,0.5);"+"-webkit-transform:"+k+"0,0"+l+";"+(a=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px");e.bar.setAttribute("style",f);e.wrapper=document.createElement("div");f="-webkit-mask:-webkit-canvas(scrollbar"+e.uid+e.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(c?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+(e.dir=="horizontal"?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;");e.wrapper.setAttribute("style",f);e.wrapper.appendChild(e.bar);b.appendChild(e.wrapper)}function a(a,b){var f=this,m;f.element=typeof a=="object"?a:document.getElementById(a);f.wrapper=f.element.parentNode;f.element.style.webkitTransitionProperty="-webkit-transform";f.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)";f.element.style.webkitTransitionDuration="0";f.element.style.webkitTransform=k+"0,0"+l;f.options={bounce:c,momentum:c,checkDOMChanges:true,topOnDOMChanges:false,hScrollbar:c,vScrollbar:c,fadeScrollbar:d||e||!g,shrinkScrollbar:d||e||!g,desktopCompatibility:false,overflow:"hidden",snap:false};if(typeof b=="object"){for(m in b){f.options[m]=b[m]}}if(f.options.desktopCompatibility){f.options.overflow="hidden"}f.wrapper.style.overflow=f.options.overflow;f.refresh();window.addEventListener("onorientationchange"in window?"orientationchange":"resize",f,false);if(g||f.options.desktopCompatibility){f.element.addEventListener(h,f,false);f.element.addEventListener(i,f,false);f.element.addEventListener(j,f,false)}if(f.options.checkDOMChanges){f.element.addEventListener("DOMSubtreeModified",f,false)}}a.prototype={x:0,y:0,enabled:true,handleEvent:function(a){var b=this;switch(a.type){case h:b.touchStart(a);break;case i:b.touchMove(a);break;case j:b.touchEnd(a);break;case"webkitTransitionEnd":b.transitionEnd();break;case"orientationchange":case"resize":b.refresh();break;case"DOMSubtreeModified":b.onDOMModified(a);break}},onDOMModified:function(a){var b=this;if(a.target.parentNode!=b.element){return}setTimeout(function(){b.refresh()},0);if(b.options.topOnDOMChanges&&(b.x!=0||b.y!=0)){b.scrollTo(0,0,"0")}},refresh:function(){var a=this,c=this.x,d=this.y,e;a.scrollWidth=a.wrapper.clientWidth;a.scrollHeight=a.wrapper.clientHeight;a.scrollerWidth=a.element.offsetWidth;a.scrollerHeight=a.element.offsetHeight;a.maxScrollX=a.scrollWidth-a.scrollerWidth;a.maxScrollY=a.scrollHeight-a.scrollerHeight;a.directionX=0;a.directionY=0;if(a.scrollX){if(a.maxScrollX>=0){c=0}else if(a.x<a.maxScrollX){c=a.maxScrollX}}if(a.scrollY){if(a.maxScrollY>=0){d=0}else if(a.y<a.maxScrollY){d=a.maxScrollY}}if(a.options.snap){a.maxPageX=-Math.floor(a.maxScrollX/a.scrollWidth);a.maxPageY=-Math.floor(a.maxScrollY/a.scrollHeight);e=a.snap(c,d);c=e.x;d=e.y}if(c!=a.x||d!=a.y){a.setTransitionTime("0");a.setPosition(c,d,true)}a.scrollX=a.scrollerWidth>a.scrollWidth;a.scrollY=!a.scrollX||a.scrollerHeight>a.scrollHeight;if(a.options.hScrollbar&&a.scrollX){a.scrollBarX=a.scrollBarX||new b("horizontal",a.wrapper,a.options.fadeScrollbar,a.options.shrinkScrollbar);a.scrollBarX.init(a.scrollWidth,a.scrollerWidth)}else if(a.scrollBarX){a.scrollBarX=a.scrollBarX.remove()}if(a.options.vScrollbar&&a.scrollY&&a.scrollerHeight>a.scrollHeight){a.scrollBarY=a.scrollBarY||new b("vertical",a.wrapper,a.options.fadeScrollbar,a.options.shrinkScrollbar);a.scrollBarY.init(a.scrollHeight,a.scrollerHeight)}else if(a.scrollBarY){a.scrollBarY=a.scrollBarY.remove()}},setPosition:function(a,b,c){var d=this;d.x=a;d.y=b;d.element.style.webkitTransform=k+d.x+"px,"+d.y+"px"+l;if(!c){if(d.scrollBarX){d.scrollBarX.setPosition(d.x)}if(d.scrollBarY){d.scrollBarY.setPosition(d.y)}}},setTransitionTime:function(a){var b=this;a=a||"0";b.element.style.webkitTransitionDuration=a;if(b.scrollBarX){b.scrollBarX.bar.style.webkitTransitionDuration=a;b.scrollBarX.wrapper.style.webkitTransitionDuration=c&&b.options.fadeScrollbar?"300ms":"0"}if(b.scrollBarY){b.scrollBarY.bar.style.webkitTransitionDuration=a;b.scrollBarY.wrapper.style.webkitTransitionDuration=c&&b.options.fadeScrollbar?"300ms":"0"}},touchStart:function(a){var b=this,c;a.preventDefault();a.stopPropagation();if(!b.enabled){return}b.scrolling=true;b.moved=false;b.dist=0;b.setTransitionTime("0");if(b.options.momentum||b.options.snap){c=new WebKitCSSMatrix(window.getComputedStyle(b.element).webkitTransform);if(c.e!=b.x||c.f!=b.y){document.removeEventListener("webkitTransitionEnd",b,false);b.setPosition(c.e,c.f);b.moved=true}}b.touchStartX=g?a.changedTouches[0].pageX:a.pageX;b.scrollStartX=b.x;b.touchStartY=g?a.changedTouches[0].pageY:a.pageY;b.scrollStartY=b.y;b.scrollStartTime=a.timeStamp;b.directionX=0;b.directionY=0},touchMove:function(a){var b=this,c=g?a.changedTouches[0].pageX:a.pageX,d=g?a.changedTouches[0].pageY:a.pageY,e=b.scrollX?c-b.touchStartX:0,f=b.scrollY?d-b.touchStartY:0,h=b.x+e,i=b.y+f;if(!b.scrolling){return}a.stopPropagation();b.touchStartX=c;b.touchStartY=d;if(h>=0||h<b.maxScrollX){h=b.options.bounce?Math.round(b.x+e/3):h>=0||b.maxScrollX>=0?0:b.maxScrollX}if(i>=0||i<b.maxScrollY){i=b.options.bounce?Math.round(b.y+f/3):i>=0||b.maxScrollY>=0?0:b.maxScrollY}if(b.dist>5){b.setPosition(h,i);b.moved=true;b.directionX=e>0?-1:1;b.directionY=f>0?-1:1}else{b.dist+=Math.abs(e)+Math.abs(f)}},touchEnd:function(a){var b=this,c=a.timeStamp-b.scrollStartTime,d=g?a.changedTouches[0]:a,e,f,h,i,j=0,k=b.x,l=b.y,m;if(!b.scrolling){return}b.scrolling=false;if(!b.moved){b.resetPosition();if(g){e=d.target;while(e.nodeType!=1){e=e.parentNode}e.style.pointerEvents="auto";f=document.createEvent("MouseEvents");f.initMouseEvent("click",true,true,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);f._fake=true;e.dispatchEvent(f)}return}if(!b.options.snap&&c>250){b.resetPosition();return}if(b.options.momentum){h=b.scrollX===true?b.momentum(b.x-b.scrollStartX,c,b.options.bounce?-b.x+b.scrollWidth/5:-b.x,b.options.bounce?b.x+b.scrollerWidth-b.scrollWidth+b.scrollWidth/5:b.x+b.scrollerWidth-b.scrollWidth):{dist:0,time:0};i=b.scrollY===true?b.momentum(b.y-b.scrollStartY,c,b.options.bounce?-b.y+b.scrollHeight/5:-b.y,b.options.bounce?(b.maxScrollY<0?b.y+b.scrollerHeight-b.scrollHeight:0)+b.scrollHeight/5:b.y+b.scrollerHeight-b.scrollHeight):{dist:0,time:0};j=Math.max(Math.max(h.time,i.time),1);k=b.x+h.dist;l=b.y+i.dist}if(b.options.snap){m=b.snap(k,l);k=m.x;l=m.y;j=Math.max(m.time,j)}b.scrollTo(k,l,j+"ms")},transitionEnd:function(){var a=this;document.removeEventListener("webkitTransitionEnd",a,false);a.resetPosition()},resetPosition:function(){var a=this,b=a.x,c=a.y;if(a.x>=0){b=0}else if(a.x<a.maxScrollX){b=a.maxScrollX}if(a.y>=0||a.maxScrollY>0){c=0}else if(a.y<a.maxScrollY){c=a.maxScrollY}if(b!=a.x||c!=a.y){a.scrollTo(b,c)}else{if(a.moved){a.onScrollEnd();a.moved=false}if(a.scrollBarX){a.scrollBarX.hide()}if(a.scrollBarY){a.scrollBarY.hide()}}},snap:function(a,b){var c=this,d;if(c.directionX>0){a=Math.floor(a/c.scrollWidth)}else if(c.directionX<0){a=Math.ceil(a/c.scrollWidth)}else{a=Math.round(a/c.scrollWidth)}c.pageX=-a;a=a*c.scrollWidth;if(a>0){a=c.pageX=0}else if(a<c.maxScrollX){c.pageX=c.maxPageX;a=c.maxScrollX}if(c.directionY>0){b=Math.floor(b/c.scrollHeight)}else if(c.directionY<0){b=Math.ceil(b/c.scrollHeight)}else{b=Math.round(b/c.scrollHeight)}c.pageY=-b;b=b*c.scrollHeight;if(b>0){b=c.pageY=0}else if(b<c.maxScrollY){c.pageY=c.maxPageY;b=c.maxScrollY}d=Math.round(Math.max(Math.abs(c.x-a)/c.scrollWidth*500,Math.abs(c.y-b)/c.scrollHeight*500));return{x:a,y:b,time:d}},scrollTo:function(a,b,c){var d=this;if(d.x==a&&d.y==b){d.resetPosition();return}d.moved=true;d.setTransitionTime(c||"350ms");d.setPosition(a,b);if(c==="0"||c=="0s"||c=="0ms"){d.resetPosition()}else{document.addEventListener("webkitTransitionEnd",d,false)}},scrollToPage:function(a,b,c){var d=this,e;if(!d.options.snap){d.pageX=-Math.round(d.x/d.scrollWidth);d.pageY=-Math.round(d.y/d.scrollHeight)}if(a=="next"){a=++d.pageX}else if(a=="prev"){a=--d.pageX}if(b=="next"){b=++d.pageY}else if(b=="prev"){b=--d.pageY}a=-a*d.scrollWidth;b=-b*d.scrollHeight;e=d.snap(a,b);a=e.x;b=e.y;d.scrollTo(a,b,c||"500ms")},scrollToElement:function(a,b){a=typeof a=="object"?a:this.element.querySelector(a);if(!a){return}var c=this,d=c.scrollX?-a.offsetLeft:0,e=c.scrollY?-a.offsetTop:0;if(d>=0){d=0}else if(d<c.maxScrollX){d=c.maxScrollX}if(e>=0){e=0}else if(e<c.maxScrollY){e=c.maxScrollY}c.scrollTo(d,e,b)},momentum:function(a,b,c,d){var e=2.5,f=1.2,g=Math.abs(a)/b*1e3,h=g*g/e/1e3,i=0;if(a>0&&h>c){g=g*c/h/e;h=c}else if(a<0&&h>d){g=g*d/h/e;h=d}h=h*(a<0?-1:1);i=g/f;return{dist:Math.round(h),time:Math.round(i)}},onScrollEnd:function(){},destroy:function(a){var b=this;window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",b,false);b.element.removeEventListener(h,b,false);b.element.removeEventListener(i,b,false);b.element.removeEventListener(j,b,false);document.removeEventListener("webkitTransitionEnd",b,false);if(b.options.checkDOMChanges){b.element.removeEventListener("DOMSubtreeModified",b,false)}if(b.scrollBarX){b.scrollBarX=b.scrollBarX.remove()}if(b.scrollBarY){b.scrollBarY=b.scrollBarY.remove()}if(a){b.wrapper.parentNode.removeChild(b.wrapper)}return null}};b.prototype={init:function(a,b){var c=this,d;if(c.dir=="horizontal"){if(c.maxSize!=c.wrapper.offsetWidth){c.maxSize=c.wrapper.offsetWidth;d=document.getCSSCanvasContext("2d","scrollbar"+c.uid+c.dir,c.maxSize,5);d.fillStyle="rgb(0,0,0)";d.beginPath();d.arc(2.5,2.5,2.5,Math.PI/2,-Math.PI/2,false);d.lineTo(c.maxSize-2.5,0);d.arc(c.maxSize-2.5,2.5,2.5,-Math.PI/2,Math.PI/2,false);d.closePath();d.fill()}}else{if(c.maxSize!=c.wrapper.offsetHeight){c.maxSize=c.wrapper.offsetHeight;d=document.getCSSCanvasContext("2d","scrollbar"+c.uid+c.dir,5,c.maxSize);d.fillStyle="rgb(0,0,0)";d.beginPath();d.arc(2.5,2.5,2.5,Math.PI,0,false);d.lineTo(5,c.maxSize-2.5);d.arc(2.5,c.maxSize-2.5,2.5,0,Math.PI,false);d.closePath();d.fill()}}c.size=Math.max(Math.round(c.maxSize*c.maxSize/b),6);c.maxScroll=c.maxSize-c.size;c.toWrapperProp=c.maxScroll/(a-b);c.bar.style[c.dir=="horizontal"?"width":"height"]=c.size+"px"},setPosition:function(a){var b=this;if(b.wrapper.style.opacity!="1"){b.show()}a=Math.round(b.toWrapperProp*a);if(a<0){a=b.shrink?a+a*3:0;if(b.size+a<7){a=-b.size+6}}else if(a>b.maxScroll){a=b.shrink?a+(a-b.maxScroll)*3:b.maxScroll;if(b.size+b.maxScroll-a<7){a=b.size+b.maxScroll-6}}a=b.dir=="horizontal"?k+a+"px,0"+l:k+"0,"+a+"px"+l;b.bar.style.webkitTransform=a},show:function(){if(c){this.wrapper.style.webkitTransitionDelay="0"}this.wrapper.style.opacity="1"},hide:function(){if(c){this.wrapper.style.webkitTransitionDelay="350ms"}this.wrapper.style.opacity="0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d=/iphone/gi.test(navigator.appVersion),e=/ipad/gi.test(navigator.appVersion),f=/android/gi.test(navigator.appVersion),g=d||e||f,h=g?"touchstart":"mousedown",i=g?"touchmove":"mousemove",j=g?"touchend":"mouseup",k="translate"+(c?"3d(":"("),l=c?",0)":")",m=0;window.iScroll=a})()